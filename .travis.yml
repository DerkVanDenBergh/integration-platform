os:
  - linux

language: php

php:
  - '8.0'

services:
  - mysql

cache:
  directories:
    - node_modules
    - vendor

before_script:  
  - cp .env.travis .env  
  - sudo mysql -e 'create database homestead;'  
  - composer self-update  
  - composer install --prefer-source --no-interaction 
  - php artisan key:generate  
  - php artisan migrate
  - php artisan db:seed --class=DatabaseSeeder

deploy:
  provider: heroku
  api_key:
    secure: "Jz70PLQ4+TUCI4EXGC3z2+ehtEhuejxe466UvqDMvWLwwCs2bmwGryTJppkFyZfDaWGUWYqnp9qj+UwXFYYzw6OfFW1LoHbH9CXxUcoA1XNoQRhiz8EzfDoItsIVZR+eztucdr1h1b+KkCnLPKSIrn2CM0S8hYtoJYV60nWHM0Qu7thLjdIb+287U8plaE8HYIoHLo9T1F4rvj3h6gjqicF5t/BRYF8ZY6f5dn9aQKButCAzMynh/rpuOBJS8tQPV7jXEdy7VZ2U4XuIVzZUr8/AAG4va1SeCmhxKQGKtP6fcZW9GocXBvVjtwKEDtyY5NJYQd9EIIsrlI+NEGFx4dVnHlcqZmO23JxQ507BAsNknFvKLHBdoA3Y1z3cZYB4Sc7wDhQWcM3F+OJAku1uxjn3qyTrvd447VmFFrOvHV13F81Fe18kEbrfdfSYQwetbfTs4Y3gd7hCFzNHzdKTicPq4bK0Qx5HKHLwoW+Hay1NhAMGvNk4+cLUsblSiQozDCk78Bf+ey9ilp/xomstawO4W0TjvtkK7sfWds52t39gBAAGo1w2e0frefF5xCW5x9h8R+8pI7bNycc7064VaeA9fiT7QZAJUdG/AiIyih1AzeuW8h4JwW8vt3SIclHnWsgttQlSEYz6qnGu3zzsTmbWI80bNh/byLBUcWIHa/Q="
  app: mintegration
  on: main
  run:
    - "php artisan migrate"